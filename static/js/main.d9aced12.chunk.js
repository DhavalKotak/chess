(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),r=n(55),a=n.n(r),s=(n(37),n(17)),o=n(1),u=function(e){return e.number%2===0?Object(o.jsx)("div",{className:"tile black-tiles",children:e.image&&Object(o.jsx)("div",{style:{backgroundImage:"url(".concat(e.image,")")},className:"piece"})}):Object(o.jsx)("div",{className:"tile white-tiles",children:e.image&&Object(o.jsx)("div",{style:{backgroundImage:"url(".concat(e.image,")")},className:"piece"})})},p=n(56),l=Object(p.io)("https://react-chess-backend.herokuapp.com/");l.on("updateBoard",(function(e){return e}));for(var f=n(22),h=new function e(){var t=this;Object(f.a)(this,e),this.isSquareOccupied=function(e,t,n){return!!n.find((function(n){return n.x===e&&n.y===t}))},this.isEnPassant=function(e,t,n,i,c,r,a){if("pawn"===c){var s="w"===r?1:-1;if((n-e===-1||n-e===1)&&i-t===s)if(a.find((function(e){return e.x===n&&e.y===i-s&&e.enPassant})))return!0}return!1},this.isOpponent=function(e,t,n,i){return!!n.find((function(n){return n.x===e&&n.y===t&&n.color!==i}))},this.validMove=function(e,n,i,c,r,a,s){if("pawn"===r){var o="w"===a?1:-1;if(e===i&&n===("w"===a?1:6)&&c-n===2*o){if(!t.isSquareOccupied(i,c,s)&&!t.isSquareOccupied(i,c-o,s))return!0}else if(e===i&&c-n===o){if(!t.isSquareOccupied(i,c,s))return!0}else if(i-e===1&&c-n===o){if(t.isOpponent(i,c,s,a))return!0}else if(i-e===-1&&c-n===o&&t.isOpponent(i,c,s,a))return!0}else if("bishop"===r){if(Math.abs(e-i)===Math.abs(n-c)){if(!t.isSquareOccupied(i,c,s))return!0;if(t.isOpponent(i,c,s,a))return!0}}else if("rook"===r){if(e!==i&&n===c||e===i&&n!==c){if(!t.isSquareOccupied(i,c,s))return!0;if(t.isOpponent(i,c,s,a))return!0}}else if("knight"===r){if(e-i===2||e-i===-2){if(n-c===1||n-c===-1){if(!t.isSquareOccupied(i,c,s))return!0;if(t.isOpponent(i,c,s,a))return!0}}else if((n-c===2||n-c===-2)&&(e-i===1||e-i===-1)){if(!t.isSquareOccupied(i,c,s))return!0;if(t.isOpponent(i,c,s,a))return!0}}else if("queen"===r){if(Math.abs(i-e)===Math.abs(c-n)){if(!t.isSquareOccupied(i,c,s))return!0;if(t.isOpponent(i,c,s,a))return!0}else if(e!==i&&n===c||e===i&&n!==c){if(!t.isSquareOccupied(i,c,s))return!0;if(t.isOpponent(i,c,s,a))return!0}}else if("king"===r){if(e-i===1||i-e===1){if(!t.isSquareOccupied(i,c,s))return!0;if(t.isOpponent(i,c,s,a))return!0}if(n-c===1||c-n===1){if(!t.isSquareOccupied(i,c,s))return!0;if(t.isOpponent(i,c,s,a))return!0}}return!1}},g=["a","b","c","d","e","f","g","h"],d=["1","2","3","4","5","6","7","8"],b=1,m=[],j=0;j<2;j++){var O=0===j?"w":"b",y=0===j?0:7;m.push({image:"img/".concat(O,"-king.png"),x:4,y:y,type:"king",color:O}),m.push({image:"img/".concat(O,"-queen.png"),x:3,y:y,type:"queen",color:O}),m.push({image:"img/".concat(O,"-bishop.png"),x:5,y:y,type:"bishop",color:O}),m.push({image:"img/".concat(O,"-bishop.png"),x:2,y:y,type:"bishop",color:O}),m.push({image:"img/".concat(O,"-knight.png"),x:6,y:y,type:"knight",color:O}),m.push({image:"img/".concat(O,"-knight.png"),x:1,y:y,type:"knight",color:O}),m.push({image:"img/".concat(O,"-rook.png"),x:7,y:y,type:"rook",color:O}),m.push({image:"img/".concat(O,"-rook.png"),x:0,y:y,type:"rook",color:O})}for(var x=0;x<9;x++)m.push({image:"img/b-pawn.png",x:x,y:6,type:"pawn",color:"b"});for(var v=0;v<9;v++)m.push({image:"img/w-pawn.png",x:v,y:1,type:"pawn",color:"w"});var w=function(){l.on("updateBoard",(function(e){S(e)}));for(var e=Object(i.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)(0),a=Object(s.a)(r,2),p=a[0],f=a[1],j=Object(i.useState)(0),O=Object(s.a)(j,2),y=O[0],x=O[1],v=Object(i.useState)(m),w=Object(s.a)(v,2),k=w[0],S=w[1],M=Object(i.useRef)(null),I=[],q=function(e){for(var t=function(t){var n=t+e+2,i=k.find((function(n){return n.x===t&&n.y===e})),c=i?i.image:void 0;I.push(Object(o.jsx)(u,{number:n,image:c},g[t]+d[e]))},n=0;n<g.length;n++)t(n)},P=d.length-1;P>=0;P--)q(P);return Object(o.jsx)("div",{className:"board",onMouseDown:function(e){return function(e){var t=M.current;if(e.target.classList.contains("piece")&&t){f(Math.floor((e.clientX-t.offsetLeft)/(t.clientWidth/8))),x(Math.abs(Math.ceil((e.clientY-t.offsetTop-800)/(t.clientWidth/8))));var n=e.clientX-e.target.clientWidth/2,i=e.clientY-e.target.clientHeight/2;e.target.style.position="absolute",e.target.style.top="".concat(i,"px"),e.target.style.left="".concat(n,"px")}c(e.target)}(e)},onMouseMove:function(e){return function(e){var t=M.current;if(n&&n.classList.contains("piece")&&t&&n.color===(b%2===0?"w":"b")){b++;var i=t.offsetLeft,c=t.offsetTop,r=t.clientWidth+t.offsetLeft-t.clientWidth/8,a=t.clientHeight+t.offsetTop-t.clientHeight/8,s=e.clientX-e.target.clientWidth/2,o=e.clientY-e.target.clientHeight/2;n.style.position="absolute",n.style.left="".concat(s<i?i:s>r?r:s,"px"),n.style.top="".concat(o<c?c:o>a?a:o,"px")}}(e)},onMouseUp:function(e){return function(e){var t=M.current;if(n&&t){var i=Math.floor((e.clientX-t.offsetLeft)/(t.clientWidth/8)),r=Math.abs(Math.ceil((e.clientY-t.offsetTop-800)/(t.clientWidth/8))),a=k.find((function(e){return e.x===p&&e.y===y}));if(a&&a.color===(b%2===0?"w":"b")){var s=h.validMove(p,y,i,r,a.type,a.color,k),o=h.isEnPassant(p,y,i,r,a.type,a.color,k),u="w"===a.color?1:-1;if(o){var f=k.reduce((function(e,t){return t.x===p&&t.y===y?(t.enPassant=!1,t.x=i,t.y=r,e.push(t)):t.x===i&&t.y===r-u||("pawn"===t.type&&(t.enPassant=!1),e.push(t)),e}),[]);S(f);var g=window.sessionStorage.getItem("gameId");l.emit("move",g,f)}else if(s){var d=k.reduce((function(e,t){return t.y===y&&t.x===p?(2===Math.abs(y-r)&&"pawn"===t.type?t.enPassant=!0:t.enPassant=!1,t.x=i,t.y=r,e.push(t)):t.x===i&&t.y===r||("pawn"===t.type&&(t.enPassant=!1),e.push(t)),e}),[]);a.color,S(d),b++;var m=window.sessionStorage.getItem("gameId");l.emit("move",m,d)}else n.style.position="relative",n.style.removeProperty("top"),n.style.removeProperty("left")}c(null)}}(e)},ref:M,children:I})},k=n(24),S=n(2),M=n(57),I=n(15),q=n(61),P=n(60),N=n(58),W=n(35),C=function(e){Object(q.a)(n,e);var t=Object(P.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.call(this)).create=function(){l.emit("createRoom",""),l.on("generateId",(function(t){e.setState({gameId:t})}))},e.join=function(){var t=function(e){return window.sessionStorage.setItem("gameId",e),l.emit("join",e),e}(e.id.current.value);e.setState({gameId:t})},e.state={gameId:""},e.join=e.join.bind(Object(I.a)(e)),e.create=e.create.bind(Object(I.a)(e)),e.id=c.a.createRef(null),e}return Object(M.a)(n,[{key:"render",value:function(){return Object(o.jsx)(c.a.Fragment,{children:Object(o.jsxs)(N.a,{className:"text-center",children:[Object(o.jsx)("h1",{children:"Welcome to Chess"}),Object(o.jsx)("h2",{children:Object(o.jsx)(W.a,{variant:"success",className:"w-100",onClick:this.create,children:"Create Room"})}),Object(o.jsx)("div",{children:this.state.gameId}),Object(o.jsx)(k.b,{to:this.state.gameId?"/game":"",children:Object(o.jsx)("h2",{children:Object(o.jsx)(W.a,{variant:"primary",className:"w-100",onClick:this.join,children:"Join Room"})})}),Object(o.jsx)("input",{type:"text",className:"w-100",ref:this.id})]})})}}]),n}(i.Component);var L=function(){return Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(k.a,{children:Object(o.jsxs)(S.c,{children:[Object(o.jsx)(S.a,{exact:!0,path:"/chess",component:C}),Object(o.jsx)(S.a,{path:"/game",component:w})]})})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,102)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),i(e),c(e),r(e),a(e)}))};a.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(L,{})}),document.getElementById("root")),T()},37:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.d9aced12.chunk.js.map